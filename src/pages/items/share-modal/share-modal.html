<ion-header>
  <ion-toolbar color="favorite">
    <ion-title>Share {{type}}</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="close()">
      <ion-icon name="close"></ion-icon>
    </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div>
    <ion-segment [(ngModel)]="message">
      <ion-segment-button value="text">
        <ion-icon name="text"></ion-icon>
      </ion-segment-button>
      <ion-segment-button value="contact" (click)="getContact()">
        <ion-icon name="contact"></ion-icon>
      </ion-segment-button>
      <ion-segment-button value="mail">
        <ion-icon name="mail"></ion-icon>
      </ion-segment-button>
    </ion-segment>
  </div>
  <div padding [ngSwitch]="message" class="messForm" [class.notAvail]="item.disable">
    <div class="mess" *ngIf="item.disable" padding>
      <h3 ion-text color="danger">This Feature is not Available for {{item?.name}}</h3>
    </div>
    <div *ngSwitchCase="'text'">
      <form [formGroup]="smsForm" (ngSubmit)="sendSms(smsForm)">
        <ion-list no-lines>
          <h3 ion-text color="mygray">Send Text<span *ngIf="hide"> to {{picked?.name.formatted}}</span></h3>
          <div class="field">
            <div radio-group formControlName="phone" [hidden]="!hide">
              <ion-item *ngFor="let number of picked?.phoneNumbers">
                <ion-label>{{number.type}}: {{number.value}}</ion-label>
                <ion-radio [id]="number.id" name="sms" [value]="number.value"></ion-radio>
              </ion-item>
              <ion-item>
                <ion-label>Other Number</ion-label>
                <ion-radio id="manual" name="sms" [value]="field" checked></ion-radio>
              </ion-item>
            </div>
            <ion-item [class.myError]="!phone.valid && phone.touched">
              <ion-label stacked color="danger"><span *ngIf="!phone.valid && phone.touched">Check the Number</span></ion-label>
              <ion-input id="custom" name="custom" type="tel" [(ngModel)]="field" placeholder="Manual Selected Number" [ngModelOptions]="{standalone: true}"
                (input)="customField()" clearInput></ion-input>
            </ion-item>
            <ion-item>
              <ion-label stacked>Message</ion-label>
              <ion-input formControlName="smsText" id="text" name="text" type="text" clearInput></ion-input>
            </ion-item>
            <ion-item></ion-item>
          </div>
          <ion-item>
            <button ion-button block [disabled]="item.disable || !phone.valid" class="formBtn" type="submit">Send Message</button>
          </ion-item>
        </ion-list>
      </form>
    </div>
    <div *ngSwitchCase="'mail'">
      <form [formGroup]="emailForm" (ngSubmit)="sendEmail(emailForm)">
        <ion-list no-lines>
          <h3 ion-text color="mygray">Send Email<span *ngIf="hide"> to {{picked?.name.formatted}}</span></h3>
          <div class="field">
            <div radio-group formControlName="email" [hidden]="!hide">
              <ion-item *ngFor="let addy of picked?.emails">
                <ion-label>{{addy.type}}: {{addy.value}}</ion-label>
                <ion-radio [id]="email.id" name="email" [value]="addy.value"></ion-radio>
              </ion-item>
              <ion-item>
                <ion-label>Other Email</ion-label>
                <ion-radio id="manual" name="email" [value]="field"></ion-radio>
              </ion-item>
            </div>
            <ion-item [class.myError]="!email.valid && email.touched">
              <ion-label stacked color="danger"><span *ngIf="!email.valid && email.touched">Check Email Address</span></ion-label>
              <ion-input id="custom" name="custom" type="email" [(ngModel)]="field" placeholder="Manual Selected Email" [ngModelOptions]="{standalone: true}"
                (input)="customField()" clearInput></ion-input>
            </ion-item>
            <ion-item>
              <ion-label stacked>Subject</ion-label>
              <ion-input formControlName="emailText" id="text" name="text" type="text" clearInput></ion-input>
            </ion-item>
            <ion-item>
              <ion-label stacked>Message</ion-label>
              <ion-textarea formControlName="body" id="body" name="text" type="text"></ion-textarea>
            </ion-item>
            <ion-item></ion-item>
          </div>
          <ion-item>
            <button ion-button block [disabled]="item.disable || !email.valid" class="formBtn" type="submit">Send Email</button>
          </ion-item>
        </ion-list>
      </form>
    </div>
  </div>
</ion-content>
